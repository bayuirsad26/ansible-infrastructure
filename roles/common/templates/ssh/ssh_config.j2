# SSH Client Configuration
# Managed by Ansible - Do not edit manually

# Site-wide defaults for some commonly used options.  For a comprehensive
# list of available options, their meanings and defaults, please see the
# ssh_config(5) man page.

Host *
    # Forward agent to remote host (be careful with this)
    ForwardAgent no
    
    # Forward X11 connections
    ForwardX11 no
    ForwardX11Trusted no
    
    # Password authentication
    PasswordAuthentication {{ common_ssh_password_authentication }}
    ChallengeResponseAuthentication {{ common_ssh_challenge_response_auth }}
    
    # Public key authentication
    PubkeyAuthentication {{ common_ssh_pubkey_authentication }}
    
    # GSSAPI authentication
    GSSAPIAuthentication {{ common_ssh_gss_api_authentication }}
    GSSAPIDelegateCredentials no
    
    # Host-based authentication
    HostbasedAuthentication no
    
    # Connection settings
    ConnectTimeout 30
    ServerAliveInterval {{ common_ssh_client_alive_interval }}
    ServerAliveCountMax {{ common_ssh_client_alive_count_max }}
    
    # Security settings
    Protocol 2
    Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
    MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha2-256,hmac-sha2-512
    KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256
    
    # Host key verification
    StrictHostKeyChecking ask
    VerifyHostKeyDNS no
    
    # Connection multiplexing (improve performance)
    ControlMaster auto
    ControlPath /tmp/ssh_mux_%h_%p_%r
    ControlPersist 4h
    
    # Compression
    Compression yes
    
    # Send locale environment variables
    SendEnv LANG LC_*
    
    # Hash known hosts for privacy
    HashKnownHosts yes
    
    # Use only known secure host key types
    HostKeyAlgorithms ssh-ed25519-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-ed25519,ssh-rsa,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp521,ecdsa-sha2-nistp384,ecdsa-sha2-nistp256
    
    # Disable dangerous features
    PermitLocalCommand no
    
    # Visual host key
    VisualHostKey no
    
    # Tunnel settings
    Tunnel no
    TunnelDevice any:any
    
    # Connection sharing
    TCPKeepAlive yes
    
    # Exit on forwarding failure
    ExitOnForwardFailure no
    
    # User known hosts file
    UserKnownHostsFile ~/.ssh/known_hosts ~/.ssh/known_hosts2
    
    # Identity files (order matters)
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519
    IdentityFile ~/.ssh/id_rsa
    IdentityFile ~/.ssh/id_ecdsa

# Example host-specific configurations
# Uncomment and modify as needed

# Host production-server
#     HostName 10.0.1.100
#     User deploy
#     Port 2222
#     IdentityFile ~/.ssh/production_key
#     StrictHostKeyChecking yes

# Host bastion
#     HostName bastion.example.com
#     User admin
#     Port 22
#     ProxyCommand none
#     ForwardAgent yes

# Host internal-*
#     ProxyCommand ssh bastion nc %h %p
#     User deploy
#     StrictHostKeyChecking yes
