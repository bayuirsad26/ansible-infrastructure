# /etc/rsyslog.conf Configuration file for rsyslog
# Managed by Ansible - Do not edit manually

#################
#### MODULES ####
#################

module(load="imuxsock") # provides support for local system logging
module(load="imklog")   # provides kernel logging support

###########################
#### GLOBAL DIRECTIVES ####
###########################

# Use traditional timestamp format
$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat

# Set the default permissions
$FileOwner root
$FileGroup adm
$FileCreateMode 0640
$DirCreateMode 0755
$Umask 0022

# Work directory
$WorkDirectory /var/spool/rsyslog

# Include all config files in /etc/rsyslog.d/
$IncludeConfig /etc/rsyslog.d/*.conf

###############
#### RULES ####
###############

# Emergency messages to all users
*.emerg                         :omusrmsg:*

# System messages
kern.*                          -/var/log/kern.log
mail.*                          -/var/log/mail.log
daemon.*                        -/var/log/daemon.log
auth,authpriv.*                 /var/log/auth.log
syslog.*                        -/var/log/syslog
user.*                          -/var/log/user.log
lpr.*                           -/var/log/lpr.log
cron.*                          -/var/log/cron.log
local0,local1,local2,local3,local4,local5,local6,local7.*    -/var/log/local.log

# Everybody gets emergency messages
*.emerg                         *

# Save boot messages also to boot.log
local7.*                        /var/log/boot.log

# Security and authorization messages
auth,authpriv.*                 /var/log/secure

# All messages except mail, authpriv, and cron
*.*;mail.none;authpriv.none;cron.none    -/var/log/messages

# Log all messages to a central log file
*.*                             -/var/log/all.log

# Remote logging (if enabled)
{% if common_remote_syslog_server is defined %}
*.*                             @@{{ common_remote_syslog_server }}:{{ common_remote_syslog_port | default(514) }}
{% endif %}

# High precision timestamps
$template precise,"%timegenerated:::date-rfc3339% %HOSTNAME% %syslogtag%%msg%\n"
$ActionFileDefaultTemplate precise
