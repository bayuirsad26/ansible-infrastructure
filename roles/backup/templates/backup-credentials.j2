{% if 's3:' in backup_destination %}
# AWS S3 Configuration
AWS_ACCESS_KEY_ID={{ backup_aws_access_key | default('') }}
AWS_SECRET_ACCESS_KEY={{ backup_aws_secret_key | default('') }}
RESTIC_PASSWORD={{ backup_password | default(ansible_machine_id) }}
{% elif 'gs:' in backup_destination %}
# Google Cloud Storage Configuration
GOOGLE_PROJECT_ID={{ backup_gcs_project | default('') }}
GOOGLE_APPLICATION_CREDENTIALS={{ backup_gcs_credentials | default('') }}
RESTIC_PASSWORD={{ backup_password | default(ansible_machine_id) }}
{% elif 'azure:' in backup_destination %}
# Azure Blob Storage Configuration
AZURE_ACCOUNT_NAME={{ backup_azure_account | default('') }}
AZURE_ACCOUNT_KEY={{ backup_azure_key | default('') }}
RESTIC_PASSWORD={{ backup_password | default(ansible_machine_id) }}
{% else %}
# Default configuration
RESTIC_PASSWORD={{ backup_password | default(ansible_machine_id) }}
{% endif %}
