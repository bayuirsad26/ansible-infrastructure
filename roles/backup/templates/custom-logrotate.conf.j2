# Custom log rotation for backup logs
# Managed by Ansible - Do not edit manually

/var/log/backup/*.log {
    {{ logging_rotation_frequency | default('daily') }}
    rotate {{ logging_retention_days | default(30) if logging_rotation_frequency | default('daily') == 'daily' else (logging_retention_days | default(30) // 7) }}
    missingok
    notifempty
    compress
    delaycompress
    sharedscripts
    maxsize {{ logging_max_log_size | default('100M') }}
    create 644 {{ backup_user }} {{ backup_user }}
    postrotate
        /bin/kill -HUP $(cat /var/run/rsyslog.pid 2>/dev/null) 2>/dev/null || true
    endscript
}
